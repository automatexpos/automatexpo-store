{% extends 'base.html' %}
{% block content %}
<h2>Checkout</h2>

<div style="display:flex;gap:20px;">
  <div style="flex:1;">
    <form method="post" enctype="multipart/form-data" action="{{ url_for('payment_multiple') }}">
      <input type="hidden" name="selected_ids" value="{{ phones|map(attribute='id')|join(',') }}">
      
      <div class="field"><label>Full Name</label><input type="text" name="buyer_name" required></div>
      <div class="field"><label>Email</label><input type="email" name="buyer_email" required></div>
      <div class="field"><label>Phone</label><input type="text" name="buyer_phone" required></div>
      <div class="field"><label>Address</label><input type="text" name="buyer_address" required></div>
      <div class="field"><label>Upload Screenshot</label><input type="file" name="receipt" required></div>

      <button type="submit" class="btn">Submit Payment</button>
    </form>
  </div>

  <div style="flex:1;">
    <h3>Order Summary</h3>
    <ul>
      {% for p in phones %}
        <li>{{ p.model }} â€” {{ p.price }}</li>
      {% endfor %}
    </ul>
    <strong>Total = {{ total_price }}</strong>
  </div>
</div>
{% endblock %}
